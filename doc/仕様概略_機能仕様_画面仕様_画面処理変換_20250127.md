## 画面処理変換 仕様概要

### 概要

画面処理変換サービスは、ユーザーが指定したソースコードに含まれる画面処理（例：CICSのBMSマップセット）を解析し、指定されたターゲットの画面技術（例：HTML, CSS, JavaScript, React, Angular, Vue.js）に対応した画面定義体と、それにアクセスするプログラムコードに自動的に変換する機能を提供する。変換前には、シミュレーション機能を実行し、変換にかかる時間、変換結果の予測、変換における問題点などを事前に確認できる。変換処理では、画面定義情報だけでなく、ソースコードの解析結果（AST、メタデータ、詳細解析データなど）を参照し、画面項目とプログラム変数の関連付けなどを高精度に行う。変換後は、生成された画面定義体とプログラムコードを用いたテストを自動実行し、変換前後の画面表示や動作の同一性を検証する。テスト合格後、変換後のソースコードと画面定義体からプログラム仕様書を自動生成し、指定された場所に保存する。また、ユーザーの指示に基づき、変換前後のソースコード、画面定義情報、プログラム仕様書、テスト結果をCI/CDパイプラインを用いて指定のコンテナプラットフォームにプッシュする機能を備える。

**このサービスは、ソースコード変換サービスの一部として位置づけられるが、画面処理に特化した変換機能を提供する。**

### 前提条件

-   ユーザーは、システムにログイン済みであり、画面処理変換を実行する権限を有していること。
-   変換対象のソースコードおよび画面定義情報が、アクセス可能な場所に保存されていること（ローカルファイルシステム、バージョン管理システムなど）。
-   変換対象のソースコードは、事前にソース解析サービスで解析済みであること。
-   変換に使用する変換ルールが、変換ルールマスタに登録されていること。
-   ターゲットの画面技術に対応したフレームワークやライブラリが、アプリケーションサーバーから利用可能な状態であること。

### 主要機能

1.  **プロジェクト管理**: 画面処理変換プロジェクトを作成し、変換対象のソースコード、画面定義情報、ターゲット技術、変換オプションなどを管理する。
2.  **ソースコード指定**: 変換対象のソースコードを、ファイルパス、ディレクトリ、またはバージョン管理システムのURLなどを用いて指定する。単一ファイル、複数ファイルの一括指定、ディレクトリ指定、ワイルドカード指定からの指定など、柔軟な指定方法をサポートする。
3.  **画面定義情報指定**: 変換対象の画面定義情報（例：BMSマップセット）を、ファイルパスやデータセット名などを用いて指定する。単一ファイル、複数ファイルの一括指定、ディレクトリ指定、ワイルドカード指定からの指定など、柔軟な指定方法をサポートする。
4.  **ターゲット技術指定**: 変換先となる画面技術（例：HTML, CSS, JavaScript, React, Angular, Vue.js）を指定する。
5.  **変換オプション設定**: 変換オプション（例：画面レイアウト、スタイル、使用するフレームワーク・ライブラリ）を指定する。
6.  **依存関係指定**: 変換対象ソースコードや画面定義情報が依存する外部ファイルのインポートパスを指定する。
7.  **変換シミュレーション**: 変換実行前に、処理時間、リソース使用量、変換結果の予測、変換における問題点などを事前に確認する。
8.  **変換実行**: 指定されたソースコードおよび画面定義情報の変換を実行し、ターゲット技術に対応した画面定義体と、指定されたターゲット言語（例：Java, C#, Python）のプログラムコードを生成する。変換対象のソースコードは、画面処理以外も、指定されたターゲット言語に変換される。
9.  **変換進捗のダッシュボード表示**: 変換処理の進捗状況をリアルタイムにダッシュボードに表示する。
10. **AI/RAG/MLによる変換支援**: AI/RAG/MLサーバーを用いて、画面レイアウトの最適化、コード生成、リファクタリングなどを支援する。
11. **変換結果のデータベース保存**: 変換結果（変換後ソースコード、画面定義体、変換ログなど）をデータベース（PostgreSQL、MongoDB）に保存する。
12. **変換結果のレビュー**: 変換結果（変換後ソースコード、画面定義体など）を、画面プレビューやソースコードビューアなどでわかりやすく表示し、ユーザーがレビューできる。
13. **変換結果の手動修正**: ユーザーが、変換結果を直接編集できる機能を提供する。
14. **変換結果のテスト**: 生成された画面定義体とプログラムコードを用いて、自動的に一括してテスト（画面表示テスト、データ送受信テストなど）を実行し、変換前後の画面表示や動作の同一性を検証する。
15. **プログラム仕様書自動生成**: 変換後のソースコードと画面定義体からプログラム仕様書を自動生成する。
16. **変換結果のドキュメント出力**: 変換結果、テスト結果、プログラム仕様書を、指定された形式（PDF、JSON、XML、CSVなど）でドキュメントとして出力する。
17. **変換履歴管理**: 変換履歴を管理し、過去の変換結果を参照・比較できる。
18. **エラーハンドリング**: 変換中に発生したエラーを適切に処理し、ユーザーに通知する。
19. **各種マスタとの連携**: 環境マスタ、変換ルールマスタ、テンプレートマスタなどの各種マスタと連携して動作する。
20. **CI/CDパイプライン連携**: ユーザーの指示に基づき、変換前ソースコード、変換後ソースコード、画面定義情報、プログラム仕様書、テスト結果を、指定されたコンテナプラットフォームにプッシュする。

## 画面処理変換 機能仕様

### 機能詳細

#### 1. プロジェクト管理

-   **入力**:
    -   プロジェクト名
    -   説明（任意）
    -   ソースコード指定情報
    -   画面定義情報
    -   ターゲット技術
    -   変換オプション
-   **出力**:
    -   作成されたプロジェクトのID
-   **処理内容**:
    -   ユーザーが、Webインターフェースを介して、新規プロジェクトの名前、説明、ソースコード指定情報、画面定義情報、ターゲット技術、変換オプションを入力する。
    -   アプリケーションサーバーは、入力された情報をもとに、新規プロジェクトを作成し、データベース(PostgreSQL)に保存する。その際、ログインユーザーの顧客情報をプロジェクトに紐づける。
    -   アプリケーションサーバーは、作成されたプロジェクトのIDをWebサーバー経由でユーザーに通知する。
    -   プロジェクト情報には、変換元ソースコードの情報、変換元画面定義情報、ターゲット技術、関連するソース解析プロジェクトのID、および、変換ステータス（未着手、シミュレーション中、シミュレーション完了、変換中、変換完了、エラーなど）を含める。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー
    -   PostgreSQL

#### 2. ソースコード指定

-   **入力**:
    -   ソースコードファイル（単一ファイルまたは複数ファイル）
    -   ファイルパス、ディレクトリ
-   **出力**:
    -   なし（指定情報をアプリケーションサーバーのメモリに保存）
-   **処理内容**:
    -   ユーザーが、Webインターフェースを介して、変換対象のソースコードを指定する。
    -   単一ファイル、複数ファイルの一括指定、ディレクトリ指定、ワイルドカード指定からの指定など、柔軟な指定方法をサポートする。
    -   アプリケーションサーバーは、指定されたソースコードを、ローカルファイルシステム、または、バージョン管理システムなどから取得する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー

#### 3. 画面定義情報指定

-   **入力**:
    -   画面定義情報ファイル（例：BMSマップセット）
    -   ファイルパス、データセット名
-   **出力**:
    -   なし（指定情報をアプリケーションサーバーのメモリに保存）
-   **処理内容**:
    -   ユーザーが、Webインターフェースを介して、変換対象の画面定義情報を指定する。
    -   単一ファイル、複数ファイルの一括指定、ディレクトリ指定、ワイルドカード指定からの指定など、柔軟な指定方法をサポートする。
    -   アプリケーションサーバーは、指定された画面定義情報を、ローカルファイルシステム、バージョン管理システム、または、データセットなどから取得する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー

#### 4. ターゲット技術指定

-   **入力**:
    -   ターゲット技術（例：HTML, CSS, JavaScript, React, Angular, Vue.js）
-   **出力**:
    -   なし（指定情報をアプリケーションサーバーのメモリに保存）
-   **処理内容**:
    -   ユーザーが、Webインターフェースを介して、変換先となる画面技術を選択する。
    -   アプリケーションサーバーは、ユーザーが選択したターゲット技術をメモリに保存する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー

#### 5. 変換オプション設定

-   **入力**:
    -   変換オプション（画面レイアウト、スタイル、使用するフレームワーク・ライブラリ、AI/RAG/MLモデルの選択、詳細設定など）
-   **出力**:
    -   なし（設定情報をアプリケーションサーバーのメモリおよびプロジェクトに紐づけてデータベースに保存）
-   **処理内容**:
    -   ユーザーが、Webインターフェースを介して、変換オプションを設定する。
    -   アプリケーションサーバーは、設定された変換オプションをメモリに保存し、プロジェクト情報と関連付けてデータベース(PostgreSQL)に保存する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー
    -   PostgreSQL

#### 6. 依存関係指定

-   **入力**:
    -   インポートパス（ソースコードや画面定義情報が依存する外部ファイルのパス）
-   **出力**:
    -   なし（指定情報をアプリケーションサーバーのメモリに保存）
-   **処理内容**:
    -   ユーザーが、Webインターフェースを介して、変換対象ソースコードや画面定義情報が依存する外部ファイルのインポートパスを指定する。
    -   アプリケーションサーバーは、指定されたインポートパスをメモリに保存する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー

#### 7. 変換シミュレーション

-   **入力**:
    -   プロジェクトID
    -   変換パラメータ設定でデータベースに保存された、以下保存内容
        -   変換対象ソースファイル
        -   画面定義情報
        -   ターゲット技術
        -   変換オプション
        -   インポートパス
-   **出力**:
    -   変換処理をシミュレートし、処理進捗（シミュレーション、完了）画面上に結果出力（変換に必要な時間、問題点）、変換パラメータ設定画面へのリンク、変換実行のリンク、終了してメインメニューに戻るリンクを表示
    -   シミュレーション結果のデータベースへの記録
-   **処理内容**:
    -   ユーザーが、Webインターフェースを介して、設定した変換パラメータを画面上で確認し、シミュレーション開始を指示する。
    -   アプリケーションサーバーは、変換シミュレーション処理（実行時間の見積もり、リソース使用量の見積もり、潜在的な問題点の検出、変換結果のプレビュー生成など）を実施し、結果をデータベースに保存し、画面上に表示する。
    -   アプリケーションサーバーは、AI/RAG/MLサーバーと連携し、より高度なシミュレーションを行う。例えば、AI/RAG/MLサーバーは、変換後の画面レイアウトを生成し、ユーザーに提示する。
    -   ユーザーは、変換シミュレーションの結果を確認し、変換実施を指定するか、変換パラメータ指定に戻るか、終了してメインメニューに戻るかを選択できる。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー
    -   AI/RAG/MLサーバー
    -   PostgreSQL

#### 8. 変換実行

-   **入力**:
    -   プロジェクトID
    -   変換対象ソースファイル
    -   画面定義情報
    -   ターゲット技術
    -   変換オプション
    -   インポートパス
-   **出力**:
    -   変換後ソースコード
    -   変換後画面定義体（HTML, CSS, JavaScriptなど）
    -   変換ログ
    -   テスト結果
    -   プログラム仕様書
-   **処理内容**:
    -   アプリケーションサーバーが、プロジェクトIDに関連付けられた変換パラメータをデータベースから取得する。
    -   アプリケーションサーバーが、ParserManagerを呼び出し、ソースコードとインポートパスを渡す。
    -   アプリケーションサーバーが、ソースコードの解析結果から、画面処理に関連するコードを特定する。
    -   アプリケーションサーバーが、画面処理関連コードと画面定義情報を、指定されたターゲット技術に対応する形式に変換する。
    -   アプリケーションサーバーが、必要に応じて、AI/RAG/MLサーバーを呼び出し、画面レイアウトの最適化、コード生成、リファクタリングなどの支援を受ける。
    -   アプリケーションサーバーが、画面処理以外のソースコード部分を、指定されたターゲット言語に変換する。
    -   アプリケーションサーバーが、変換後のソースコードと画面定義体を、指定されたフォーマット（例：HTML, CSS, JavaScript）で出力する。
    -   アプリケーションサーバーが、変換後のソースコードと画面定義体を用いて、自動的に一括してテスト（画面表示テスト、データ送受信テストなど）を実行し、変換前後の画面表示や動作の同一性を検証する。
    -   アプリケーションサーバーが、テスト結果を取得する。
    -   アプリケーションサーバーが、テスト結果を元に、変換前後のソースコードの振る舞いを比較検証する。
    -   アプリケーションサーバーが、検証結果がNGの場合、変換処理を再実行する。リトライ回数に上限を設け、上限を超えた場合はエラーとして処理を終了する。
    -   アプリケーションサーバーが、テスト結果が全てOKとなった場合、変換後のソースコードと画面定義体からプログラム仕様書を自動生成する。
    -   アプリケーションサーバーが、変換後のソースコード、画面定義体、テスト結果、プログラム仕様書を、環境マスタで指定された所定の位置（ファイルサーバーなど）に保存する。
    -   アプリケーションサーバーが、変換処理の進捗状況を、PostgreSQLやMongoDBに記録し、Webサーバー経由でユーザーに表示する。
    -   アプリケーションサーバーが、変換処理の詳細なログ（例：変換日時、実行ユーザー、変換対象ソース、ターゲット技術、適用した変換ルール、変換前後のコード差分、エラー情報）をMongoDBに記録する。
    -   アプリケーションサーバーが、変換処理中に発生したエラーを適切に処理し、エラー情報をログに記録し、Webサーバー経由でユーザーに通知する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー
    -   PostgreSQL
    -   MongoDB
    -   AI/RAG/MLサーバー
    -   ParserManager

#### 9. 変換進捗のダッシュボード表示

-   **入力**:
    -   プロジェクトID
    -   変換進捗情報
-   **出力**:
    -   変換進捗状況のダッシュボード表示
-   **処理内容**:
    -   アプリケーションサーバーが、プロジェクトIDに関連付けられた変換処理の進捗状況（画面処理変換ステータス、変換シミュレーション、画面定義体変換、画面コード変換、変換完了など）をPostgreSQLから取得する。
    -   Webサーバーが、進捗情報を対象ソースコード毎に、わかりやすくダッシュボードに表示する。
    -   Webサーバーは、必要に応じて、進捗情報をリアルタイムに更新する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー
    -   PostgreSQL

#### 10. AI/RAG/MLによる変換支援

-   **入力**:
    -   ソースコード、AST、メタデータ、解析結果
    -   画面定義情報
    -   ターゲット技術
    -   変換オプション
-   **出力**:
    -   変換支援結果（コード生成結果、リファクタリング提案、最適化提案、画面レイアウト提案など）
-   **処理内容**:
    -   アプリケーションサーバーが、AI/RAG/MLサーバーに、ソースコード、AST、メタデータ、解析結果、画面定義情報、ターゲット技術、変換オプションを送信する。
    -   AI/RAG/MLサーバーが、受け取った情報に基づき、変換支援処理（コード生成、リファクタリング提案、最適化提案、画面レイアウト生成など）を実行する。
    -   AI/RAG/MLサーバーが、必要に応じて、RAGモデルを用いて外部知識ベースを検索し、変換支援処理に活用する。
    -   AI/RAG/MLサーバーが、変換支援結果をアプリケーションサーバーに返す。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   AI/RAG/MLサーバー

#### 11. 変換結果のデータベース保存

-   **入力**:
    -   プロジェクトID
    -   変換結果（変換後ソースコード、画面定義体、変換ログなど）
-   **出力**:
    -   なし（データベースに保存）
-   **処理内容**:
    -   アプリケーションサーバーが、プロジェクトIDと関連付けて、変換結果をPostgreSQL、MongoDBに保存する。
    -   アプリケーションサーバーが、変換後ソースコード、メタデータをPostgreSQLやMongoDBに保存する。
    -   アプリケーションサーバーが、変換ログをMongoDBに保存する。
    -   アプリケーションサーバーが、変換された画面定義体を、指定されたフォーマット（例：HTML, CSS, JavaScript）でファイルとして保存し、そのパスをPostgreSQLに記録する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   PostgreSQL
    -   MongoDB

#### 12. 変換結果のレビュー

-   **入力**:
    -   プロジェクトID
    -   変換結果
-   **出力**:
    -   なし
-   **処理内容**:
    -   Webサーバーが、プロジェクトIDに関連付けて、アプリケーションサーバー経由で変換結果（変換後ソースコード、画面定義体、ログなど）を取得する。
    -   Webサーバーが、変換後ソースコードを、構文ハイライトや変換前後比較などの機能を備えたビューアで表示する。
    -   Webサーバーが、変換された画面定義体を、プレビュー表示する。
    -   Webサーバーが、変換ログ（エラー、警告など）を表示する。
    -   ユーザーが、変換結果を確認し、必要に応じて修正やコメントを入力する。
    -   アプリケーションサーバーが、ユーザーからのフィードバックをデータベースに保存する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー
    -   PostgreSQL
    -   MongoDB

#### 13. 変換結果の手動修正

-   **入力**:
    -   プロジェクトID
    -   変換結果（変換後ソースコード、画面定義体）
    -   ユーザーによる修正内容
-   **出力**:
    -   修正された変換後ソースコード、画面定義体
-   **処理内容**:
    -   Webサーバーが、プロジェクトIDに関連付けて、アプリケーションサーバー経由で変換結果（変換後ソースコード、画面定義体）をユーザーに提供する。
    -   Webサーバーは、ユーザーが変換結果を直接編集できるエディタを提供する。
    -   ユーザーが、エディタを用いて変換結果を修正する。
    -   アプリケーションサーバーが、修正された変換結果をデータベースに保存する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー
    -   PostgreSQL
    -   MongoDB

#### 14. 変換結果のテスト

-   **入力**:
    -   プロジェクトID
    -   変換後ソースコード
    -   生成された画面定義体
    -   テストデータ
-   **出力**:
    -   テスト結果
-   **処理内容**:
    -   アプリケーションサーバーが、プロジェクトIDに関連付けられた変換後ソースコード、生成された画面定義体とテストデータを、テスティングフレームワークに渡す。
    -   テスティングフレームワークが、画面表示テスト（画面レイアウトや項目の表示確認）や、データ送受信テスト（画面項目とプログラム変数の連携確認）などを一括して実行する。
    -   アプリケーションサーバーが、テスト結果を取得し、データベース(PostgreSQL)に保存する。
    -   アプリケーションサーバーは、AI/RAG/MLサーバーと連携し、テスト結果の分析や問題の特定を支援する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   AI/RAG/MLサーバー
    -   PostgreSQL

#### 15. プログラム仕様書自動生成

-   **入力**:
    -   プロジェクトID
    -   変換後ソースコード
    -   解析結果
    -   画面定義情報
    -   フォーム定義情報
    -   テンプレートマスタ
-   **出力**:
    -   プログラム仕様書（指定されたフォーマット）
-   **処理内容**:
    -   アプリケーションサーバーが、プロジェクトIDに関連付けられた変換後ソースコード、解析結果、画面定義情報、フォーム定義情報、テンプレートマスタの設定を取得する。
    -   アプリケーションサーバーが、テンプレートマスタに定義されたフォーマットに従い、プログラム仕様書を生成する。
    -   アプリケーションサーバーは、AI/RAG/MLサーバーと連携し、解析結果や変換後ソースコード、画面定義情報、フォーム定義情報から、プログラム仕様書に含めるべき情報を抽出・生成する。例えば、ソースコードの要約、機能説明、入出力情報、データ構造、エラー処理、使用技術などの情報を自動的に生成し、仕様書に組み込むことができる。
    -   アプリケーションサーバーが、生成したプログラム仕様書を指定されたフォーマット（例：PDF, HTML）で出力する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   AI/RAG/MLサーバー
    -   PostgreSQL（テンプレートマスタ）
    -   MongoDB（解析結果、変換後ソースコード）

#### 16. 変換結果のドキュメント出力

-   **入力**:
    -   プロジェクトID
    -   解析結果
    -   変換結果
    -   テスト結果
    -   テンプレートマスタ
    -   出力フォーマット（PDF, JSON, XML, CSVなど）
-   **出力**:
    -   指定されたフォーマットのドキュメント
-   **処理内容**:
    -   アプリケーションサーバーが、プロジェクトIDに関連付けられた解析結果、変換結果、テスト結果、テンプレートマスタの設定を取得する。
    -   アプリケーションサーバーが、テンプレートマスタに定義されたフォーマットに従い、指定された形式（PDF, JSON, XML, CSVなど）でドキュメントを生成する。
    -   アプリケーションサーバーが、生成したドキュメントを出力する。
    -   Webサーバーが、出力されたドキュメントをユーザーに提供する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー
    -   PostgreSQL（テンプレートマスタ）
    -   MongoDB（解析結果、変換結果）

#### 17. 変換履歴管理

-   **入力**:
    -   プロジェクトID
    -   変換日時、変換種別（ソース変換、DB変換、画面処理変換、フォーム処理変換、外部システム連携変換、ダイアレクト変換）、変換対象ソース・DB・画面定義・フォーム定義、変換パラメータ、ユーザーなどの情報
-   **出力**:
    -   変換履歴一覧
    -   変換履歴詳細
-   **処理内容**:
    -   アプリケーションサーバーが、変換の実行情報をプロジェクトIDと関連付けてPostgreSQLに記録する。
    -   Webサーバーが、ユーザーからの要求に応じて、変換履歴一覧や詳細情報を表示する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー
    -   PostgreSQL

#### 18. エラーハンドリング

-   **入力**:
    -   エラー情報（エラーメッセージ、エラーコード、発生箇所など）
-   **出力**:
    -   エラーメッセージ（ユーザー向け）
    -   エラーログ
-   **処理内容**:
    -   アプリケーションサーバーが、変換処理中に発生したエラーを検知する。
    -   アプリケーションサーバーが、エラー情報をログに記録する。
    -   アプリケーションサーバーが、エラーの原因を特定し、可能な場合は自動的に対処する。
    -   アプリケーションサーバーが、エラーメッセージを生成し、Webサーバー経由でユーザーに通知する。
    -   アプリケーションサーバーが、エラー発生時の状況を、プロジェクトのステータスとしてデータベース(PostgreSQL)に記録する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー
    -   MongoDB（エラーログの保存）

#### 19. 各種マスタとの連携

-   **入力**:
    -   なし
-   **出力**:
    -   なし
-   **処理内容**:
    -   アプリケーションサーバーが、変換処理の実行に必要な情報を、各種マスタから取得する。
    -   アプリケーションサーバーが、環境マスタからインポートパスや、AI/RAG/MLサーバーの接続情報などの設定情報を取得する。
    -   アプリケーションサーバーが、変換ルールマスタから変換ルールを取得する。
    -   アプリケーションサーバーが、テンプレートマスタから、プログラム仕様書やテスト結果、変換結果のドキュメント出力のテンプレート情報を取得する。
    -   アプリケーションサーバーが、ダイアレクト基本マスタ、プロダクトマスタ、機能詳細マスタから、変換対象言語の方言情報を取得する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   PostgreSQL（各種マスタの保存）

#### 20. CI/CDパイプライン連携

-   **入力**:
    -   プロジェクトID
    -   変換前ソースコード
    -   変換後ソースコード
    -   画面定義情報
    -   フォーム定義情報
    -   プログラム仕様書
    -   テスト結果
    -   コンテナプラットフォーム情報（接続先、リポジトリ、認証情報など）
-   **出力**:
    -   なし（指定されたコンテナプラットフォームに成果物をプッシュ）
-   **処理内容**:
    -   アプリケーションサーバーが、ユーザーの指示に基づき、プロジェクトIDに関連付けられた変換前ソースコード、変換後ソースコード、画面定義情報、フォーム定義情報、プログラム仕様書、テスト結果を取得する。
    -   アプリケーションサーバーが、指定されたコンテナプラットフォーム（例：GitHub, GitLab, AWS, Azure DevOps）に接続する。
    -   アプリケーションサーバーが、取得した成果物を、指定されたリポジトリやブランチにプッシュする。
    -   アプリケーションサーバーは、プッシュの結果（成功、失敗）をログに記録し、Webサーバー経由でユーザーに通知する。
-   **関連するサーバー**:
    -   アプリケーションサーバー
    -   Webサーバー

## 画面処理変換 画面仕様概略

### 1. 画面処理変換メイン画面

-   **画面要素**:
    -   **タイトル**: 「画面処理変換」
    -   **プロジェクト管理**:
        -   **新規プロジェクト作成**: ボタン（新規プロジェクト作成画面へ遷移）
        -   **プロジェクト一覧**: テーブル（プロジェクト名、変換元技術、変換先技術、作成日時、ステータスなどを表示）
        -   **プロジェクト選択**: ドロップダウンリスト（操作対象プロジェクトを選択）
        -   **プロジェクト設定**: ボタン（選択したプロジェクトの設定画面へ遷移）
    -   **変換結果**: 表示エリア（変換結果のサマリ情報などを表示）
    -   **変換結果のエクスポート**: ボタン（エクスポート形式を選択するドロップダウンリスト付き）
    -   **変換履歴参照**: ボタン（変換履歴画面へ遷移）
    -   **ヘルプ**: リンク
-   **画面遷移**:
    -   **新規プロジェクト作成** ボタンクリックで、新規プロジェクト作成画面に遷移する。
    -   **プロジェクト設定** ボタンクリックで、選択したプロジェクトの設定画面に遷移する。
    -   **変換結果のエクスポート** ボタンクリックで、エクスポート処理を実行する。
    -   **変換履歴参照** ボタンクリックで、変換履歴画面に遷移する。
-   **表示情報**:
    -   選択されたプロジェクトの変換結果概要（変換された画面定義数、エラー件数など）を表示する。
    -   ユーザーは、表示された情報をドリルダウンして詳細を確認できる。
    -   ユーザーは、表示する情報の種類やレイアウトをカスタマイズできる。

### 2. 新規プロジェクト作成画面

-   **画面要素**:
    -   **タイトル**: 「新規プロジェクト作成」
    -   **プロジェクト名**: テキストボックス
    -   **説明**: テキストエリア
    -   **顧客**: ドロップダウンリスト（顧客一覧から選択）
    -   **ソースコード**:
        -   **解析プロジェクト選択**: ドロップダウンリスト（解析済みプロジェクトを選択）
        -   **ソースコード選択**: テキストボックス（解析プロジェクト内のソースコードを直接指定）
    -   **画面定義情報**:
        -   **ファイル選択**: ファイルアップロードボタン
        -   **データセット名指定**: テキストボックス（CICS BMSマップセットなどの場合）
        -   **URL指定**: テキストボックス（バージョン管理システム等のURLを指定）
    -   **ターゲット技術**: ドロップダウンリスト（HTML, CSS, JavaScript, React, Angular, Vue.jsなどから選択）
    -   **作成** ボタン
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **作成** ボタンクリックで、プロジェクトを作成し、画面処理変換メイン画面に遷移する。
    -   **キャンセル** ボタンクリックで、画面処理変換メイン画面に遷移する。
-   **補足**:
    -   顧客は、ログインユーザーの情報から自動的に設定されるか、システム管理者が選択する。
    -   **解析プロジェクトの選択によって、変換可能なソースコードや画面定義情報がフィルタリングされる。**

### 3. プロジェクト設定画面

-   **画面要素**:
    -   **タイトル**: 「プロジェクト設定」
    -   **プロジェクト名**: テキストボックス（編集可能）
    -   **説明**: テキストエリア（編集可能）
    -   **顧客名**: テキスト表示（読み取り専用）
    -   **ソースコード**:
        -   **解析プロジェクト選択**: ドロップダウンリスト（解析済みプロジェクトを選択）
        -   **ソースコード選択**: テキストボックス（解析プロジェクト内のソースコードを直接指定）
    -   **画面定義情報**:
        -   **ファイル選択**: ファイルアップロードボタン
        -   **データセット名指定**: テキストボックス（CICS BMSマップセットなどの場合）
        -   **URL指定**: テキストボックス（バージョン管理システム等のURLを指定）
    -   **ターゲット技術**: ドロップダウンリスト（HTML, CSS, JavaScript, React, Angular, Vue.jsなどから選択）
    -   **変換オプション設定**:
        -   **画面レイアウト**: テキストエリア、または、グラフィカルなレイアウトエディタ
        -   **スタイル設定**: テキストエリア（CSSを直接入力）、または、スタイル設定用のUI
        -   **詳細設定**: ボタン（変換オプション詳細設定画面へ遷移）
        -   **インポートパス**: テキストボックス（環境マスタの設定値を表示、編集可能）
    -   **依存関係指定**:
        -   **インポートパス**: テキストボックス（環境マスタの設定値を表示、編集可能）
    -   **変換シミュレーション**: ボタン（変換シミュレーション画面へ遷移）
    -   **変換実行**: ボタン（変換実行画面へ遷移）
    -   **保存** ボタン
    -   **削除** ボタン
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **詳細設定** ボタンクリックで、変換オプション詳細設定画面に遷移する。
    -   **変換シミュレーション** ボタンクリックで、変換シミュレーション実行画面に遷移する。
    -   **変換実行** ボタンクリックで、変換実行画面に遷移する。
    -   **保存** ボタンクリックで、プロジェクト設定を更新し、画面処理変換メイン画面に遷移する。
    -   **削除** ボタンクリックで、プロジェクトを削除し、画面処理変換メイン画面に遷移する。
    -   **キャンセル** ボタンクリックで、画面処理変換メイン画面に遷移する。
-   **補足**:
    -   プロジェクト名、説明は、プロジェクト作成後に変更可能とする。
    -   顧客名は、プロジェクト作成時に設定され、変更不可とする。
    -   **解析プロジェクトの選択によって、選択可能なソースコードがフィルタリングされる。**

### 4. 変換オプション詳細設定画面

-   **画面要素**:
    -   **タイトル**: 「変換オプション詳細設定」
    -   **画面レイアウト**:
        -   **テンプレート選択**: ドロップダウンリスト（レイアウトテンプレートを選択）
        -   **カスタムレイアウト**: テキストエリア（レイアウト定義を直接入力）
    -   **スタイル設定**:
        -   **CSSファイル**: ファイルアップロードボタン
        -   **スタイル定義**: テキストエリア（CSSを直接入力）
    -   **使用するフレームワーク/ライブラリ**:
        -   **JavaScriptフレームワーク**: ドロップダウンリスト（React, Angular, Vue.jsなどから選択）
        -   **UIライブラリ**: ドロップダウンリスト（利用可能なUIライブラリから選択）
    -   **AI/RAG/MLサーバー設定**:
        -   **利用するモデル**: ドロップダウンリスト（利用可能なモデルを表示）
        -   **生成パラメータ**: テキストボックス（温度パラメータ、トークン数など）
    -   **保存** ボタン
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **保存** ボタンクリックで、設定内容を保存し、プロジェクト設定画面に遷移する。
    -   **キャンセル** ボタンクリックで、プロジェクト設定画面に遷移する。

### 5. 変換シミュレーション実行画面

-   **画面要素**:
    -   **タイトル**: 「変換シミュレーション実行」
    -   **実行** ボタン
    -   **進捗状況**: プログレスバー
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **実行** ボタンクリックで、シミュレーションを開始し、完了後、変換シミュレーション結果確認画面に遷移する。
    -   **キャンセル** ボタンクリックで、プロジェクト設定画面に遷移する。

### 6. 変換シミュレーション結果確認画面

-   **画面要素**:
    -   **タイトル**: 「変換シミュレーション結果」
    -   **サマリ情報**:
        -   **変換開始日時**: テキスト表示
        -   **変換終了日時**: テキスト表示
        -   **所要時間予測**: テキスト表示
        -   **変換後ファイルサイズ予測**: テキスト表示
    -   **変換結果**:
        -   **変換前画面**: イメージ表示（変換前の画面イメージ）
        -   **変換後画面**: イメージ表示（変換後の画面イメージ予測）
        -   **ソースコード比較**: 差分表示（変換前後のソースコードの差分を表示）
    -   **問題点一覧**: テーブル（検出された問題点を一覧表示）
    -   **実行ログ**: テキストエリア（詳細な実行ログを表示）
    -   **操作ボタン**:
        -   **パラメータを修正して再シミュレーション** ボタン
        -   **変換実行** ボタン
        -   **閉じる** ボタン
-   **画面遷移**:
    -   **パラメータを修正して再シミュレーション** ボタンクリックで、変換パラメータ設定画面に遷移する。
    -   **変換実行** ボタンクリックで、変換処理を実行し、変換結果確認画面に遷移する。
    -   **閉じる** ボタンクリックで、プロジェクト設定画面に遷移する。

### 7. 変換実行画面

-   **画面要素**:
    -   **タイトル**: 「変換実行」
    -   **実行** ボタン
    -   **進捗状況**: プログレスバー
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **実行** ボタンクリックで、変換処理を開始し、完了後、変換結果確認画面に遷移する。
    -   **キャンセル** ボタンクリックで、プロジェクト設定画面に遷移する。

### 8. 変換結果確認画面

-   **画面要素**:
    -   **タイトル**: 「変換結果」
    -   **サマリ情報**:
        -   **変換開始日時**: テキスト表示
        -   **変換終了日時**: テキスト表示
        -   **所要時間**: テキスト表示
        -   **変換結果**: テキスト表示（成功、失敗）
        -   **生成ファイル数**: テキスト表示
    -   **変換結果一覧**: テーブル（変換されたソースコード、画面定義体などのファイル名、ダウンロードリンクを表示）
    -   **画面プレビュー**: 変換された画面定義体を用いた画面のプレビューを表示
    -   **エラーログ**: テキストエリア（エラーが発生した場合、エラーログを表示）
    -   **ソースコード比較**: ボタン（変換前後のソースコードを比較表示する画面へ遷移）
    -   **OK** ボタン
-   **画面遷移**:
    -   **ソースコード比較** ボタンクリックで、ソースコード比較画面へ遷移する。
    -   **OK** ボタンクリックで、画面処理変換メインメニュー画面に遷移する。
-   **補足**:
    -   **変換結果確認画面では、ユーザーが生成されたファイル（変換後ソースコード、画面定義体）をダウンロードできる。**
    -   **ユーザーは、画面プレビューを見ながら変換結果を確認できる。**
    -   **エラーが発生した場合は、エラーログを参照し、問題点を特定する。**

### 9. 変換履歴参照画面

-   **画面要素**:
    -   **タイトル**: 「変換履歴参照」
    -   **検索条件**:
        -   **変換日時**: テキストボックス（範囲指定）
        -   **実行ユーザー**: テキストボックス
        -   **プロジェクト**: テキストボックス
        -   **変換元**: ドロップダウンリスト
        -   **変換先技術**: ドロップダウンリスト
        -   **変換結果**: ラジオボタン（成功、失敗、全て）
        -   **検索** ボタン
    -   **変換履歴一覧**: テーブル（検索結果を表示）
    -   **詳細** ボタン（選択した履歴の詳細画面に遷移）
    -   **閉じる** ボタン
-   **画面遷移**:
    -   **詳細** ボタンクリックで、選択した履歴の詳細画面に遷移する。
    -   **閉じる** ボタンクリックで、画面処理変換メインメニュー画面に遷移する。

### 10. 変換履歴詳細画面

-   **画面要素**:
    -   **タイトル**: 「変換履歴詳細」
    -   **変換情報**:
        -   **変換日時**: テキスト表示
        -   **実行ユーザー**: テキスト表示
        -   **プロジェクト**: テキスト表示
        -   **変換元**: テキスト表示
        -   **変換先技術**: テキスト表示
        -   **変換オプション**: テキスト表示
        -   **変換結果**: テキスト表示（成功、失敗）
        -   **メッセージ**: テキスト表示
    -   **生成ファイル一覧**: テーブル（生成されたファイル名、ダウンロードリンクを表示）
    -   **エラーログ**: テキストエリア（エラーが発生した場合、エラーログを表示）
    -   **ソースコード比較**: ボタン（変換前後のソースコードを比較表示する画面へ遷移）
    -   **戻る** ボタン
-   **画面遷移**:
    -   **ソースコード比較** ボタンクリックで、ソースコード比較画面へ遷移する。
    -   **戻る** ボタンクリックで、変換履歴参照画面に遷移する。

### 11. ソースコード比較画面

-   **画面要素**:
    -   **タイトル**: 「ソースコード比較」
    -   **変換前ソースコード**: 表示エリア（構文ハイライト付き）
    -   **変換後ソースコード**: 表示エリア（構文ハイライト付き）
    -   **差分表示**: 差分をハイライト表示
    -   **同期スクロール**: チェックボックス（両方のエリアを同期してスクロールするかどうか）
    -   **戻る** ボタン
-   **画面遷移**:
    -   **戻る** ボタンクリックで、変換結果確認画面または変換履歴詳細画面に戻る。

