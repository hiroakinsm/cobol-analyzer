## DB変換 仕様概要

### 概要

DB変換サービスは、ユーザーが指定した変換元DB（VSAM, DB2, IMS DB, HiRDB, XDM, Symfoware Server, AIM, RIQS, RDMS, ODBC/JDBC経由でアクセス可能なデータベース）のスキーマとデータを、指定された変換先DB（Oracle, MySQL, PostgreSQL, MSSQL, DB2, MongoDB）に移行可能なファイル（SQLスクリプト、CSV、JSONなど）を生成する機能を提供する。また、変換元DBにアクセスするソースコード（COBOL、PL/1、アセンブラなど）の解析結果を参照し、変換先DBのスキーマ設計やデータマッピングに反映する。変換前には、シミュレーション機能を実行し、変換にかかる時間、変換結果の予測、変換における問題点などを事前に確認できる。変換処理では、スキーマ定義情報だけでなく、ソースコードの解析結果（AST、メタデータ、詳細解析データなど）を参照し、変換元DBの特性やアクセスパターンを考慮した、最適な変換先DBのスキーマ設計を支援する。変換後は、生成されたスキーマ定義とデータファイルを用いて、変換先DBへのインポートをユーザー自身が実施する。また、ユーザーの指示に基づき、変換前後のソースコード、スキーマ定義、データファイル、テスト結果をCI/CDパイプラインを用いて指定のコンテナプラットフォームにプッシュする機能を備える。

### 前提条件

-   ユーザーは、システムにログイン済みであり、DB変換を実行する権限を有していること。
-   変換対象のDBに、アプリケーションサーバーからアクセス可能であること。
-   変換対象のDBにアクセスするソースコードが、事前にソース解析サービスで解析済みであること。
-   変換に使用する変換ルールが、変換ルールマスタに登録されていること。
-   変換先DBが利用可能であり、アプリケーションサーバーからアクセス可能であること。

### 主要機能

1.  **プロジェクト管理**: DB変換プロジェクトを作成し、変換対象のDB、変換先DB、関連するソースコード、変換オプションなどを管理する。
2.  **変換元DB情報指定**: 変換元のデータベース種類、バージョン、接続情報（ホスト名、ポート番号、ユーザー名、パスワードなど）を指定する。
3.  **変換先DB情報指定**: 変換先のデータベース種類、バージョン、接続情報を指定する。
4.  **対象オブジェクト選択**: 変換対象のデータベースオブジェクト（テーブル、ビュー、インデックス、VSAMファイル、IMS DBセグメントなど）を選択する。
5.  **関連ソースコード指定**: 変換対象のDBオブジェクトにアクセスするソースコード（COBOL, PL/1, アセンブラ, Java, C/C++, VB/VBA, PHP, Rust, Python, .NET, C#）を指定する。
6.  **マッピングルール設定**: 変換前後のデータ型、カラム名、テーブル名の対応関係などのマッピングルールを定義・編集する。
7.  **変換オプション設定**: データ変換時のオプション（例：エラー処理、NULL値の扱い、文字コード）を設定する。
8.  **変換シミュレーション**: 変換実行前に、処理時間、リソース使用量、変換結果の予測、変換における問題点などを事前に確認する。
9.  **変換実行**: 実際の変換処理を実行し、変換先DBに対応したスキーマ定義ファイルとデータファイルを生成する。
10. **変換進捗のダッシュボード表示**: 変換処理の進捗状況をリアルタイムにダッシュボードに表示する。
11. **AI/RAG/MLによる変換支援**: AI/RAG/MLサーバーを用いて、スキーマ設計の最適化、データマッピングの提案、コード生成などを支援する。
12. **変換結果のデータベース保存**: 変換結果（スキーマ定義ファイル、データファイル、変換ログなど）をデータベース（PostgreSQL、MongoDB）に保存する。
13. **変換結果のレビュー**: 変換結果（スキーマ定義ファイル、データファイルなど）をわかりやすく表示し、ユーザーがレビューできる。
14. **変換結果の手動修正**: ユーザーが、変換結果を直接編集できる機能を提供する。
15. **変換結果のテスト**: 生成されたスキーマ定義ファイルやデータファイルを用いて、変換先DBでテスト（データロード、データ検証など）を実行し、変換の正確性を検証する。
16. **変換履歴管理**: 変換履歴を管理し、過去の変換内容を参照・比較できる。
17. **エラーハンドリング**: 変換中に発生したエラーを適切に処理し、ユーザーに通知する。
18. **各種マスタとの連携**: 環境マスタ、変換ルールマスタ、テンプレートマスタなどの各種マスタと連携して動作する。
19. **CI/CDパイプライン連携**: ユーザーの指示に基づき、変換前ソースコード、スキーマ定義、データファイル、テスト結果を、指定されたコンテナプラットフォームにプッシュする。

## DB変換 機能仕様

### 機能詳細

#### 1. プロジェクト管理

-   **入力**:
    -   プロジェクト名
    -   説明（任意）
    -   変換元DB情報
    -   変換先DB情報
    -   関連ソースコード情報
    -   変換オプション
-   **出力**:
    -   作成されたプロジェクトのID
-   **処理内容**:
    -   ユーザーが、Webインターフェースを介して、新規プロジェクトの名前、説明、変換元DB情報、変換先DB情報、関連ソースコード情報、変換オプションを入力する。
    -   アプリケーションサーバーは、入力された情報をもとに、新規プロジェクトを作成し、データベース(PostgreSQL)に保存する。その際、ログインユーザーの顧客情報をプロジェクトに紐づける。
    -   アプリケーションサーバーは、作成されたプロジェクトのIDをWebサーバー経由でユーザーに通知する。
    -   プロジェクト情報には、変換元DBの種類、変換先DBの種類、関連するソース解析プロジェクトのID、変換ステータス（未着手、シミュレーション中、シミュレーション完了、変換中、変換完了、エラーなど）を含める。
    -   **プロジェクトには、顧客IDを紐づけ、顧客ごとにプロジェクトを管理する。**

#### 2. 変換元DB情報設定

-   **入力**:
    -   変換元DBの種類（VSAM, DB2, IMS DB, HiRDB, XDM, Symfoware Server, AIM, RIQS, RDMS, ODBC/JDBC接続DB）
    -   バージョン
    -   接続情報（ホスト名、ポート番号、ユーザー名、パスワード、データベース名など）
    -   関連するJCLファイル、定義体ファイル
-   **出力**:
    -   なし（設定情報をアプリケーションサーバーのメモリおよびDBに保存）
-   **処理内容**:
    -   ユーザーが入力した変換元DBの情報を、アプリケーションサーバーが受け取り、接続情報を検証する。
    -   検証OKの場合、アプリケーションサーバーは接続情報をメモリに保存するとともに、データベース(PostgreSQL)に保存する。
    -   検証NGの場合、アプリケーションサーバーはエラーメッセージをWebサーバー経由でユーザーに表示する。
    -   **アプリケーションサーバーは、指定されたJCLファイルや定義体ファイルを解析し、変換元DBの構成や特性を把握する。**

#### 3. 変換先DB情報設定

-   **入力**:
    -   変換先DBの種類（Oracle, MySQL, PostgreSQL, MSSQL, DB2, MongoDB）
    -   バージョン
    -   接続情報（ホスト名、ポート番号、ユーザー名、パスワード、データベース名など）
-   **出力**:
    -   なし（設定情報をアプリケーションサーバーのメモリおよびDBに保存）
-   **処理内容**:
    -   ユーザーが入力した変換先DBの情報を、アプリケーションサーバーが受け取り、接続情報を検証する。
    -   検証OKの場合、アプリケーションサーバーは接続情報をメモリに保存するとともに、データベース(PostgreSQL)に保存する。
    -   検証NGの場合、アプリケーションサーバーはエラーメッセージをWebサーバー経由でユーザーに表示する。

#### 4. 対象オブジェクト選択

-   **入力**:
    -   変換元DB情報
    -   変換対象オブジェクトのリスト（テーブル、ビュー、インデックス、VSAMファイル、IMS DBセグメントなどの一覧）
-   **出力**:
    -   選択されたオブジェクトのリスト
-   **処理内容**:
    -   アプリケーションサーバーが、変換元DBに接続し、選択可能なオブジェクト一覧を取得する。
    -   アプリケーションサーバーが、オブジェクト一覧をWebサーバー経由でユーザーに提示する。
    -   ユーザーが、Webインターフェース上で変換対象オブジェクトを選択する。
    -   アプリケーションサーバーが、選択されたオブジェクトのリストをメモリに保存する。

#### 5. 関連ソースコード指定

-   **入力**:
    -   変換対象オブジェクトに関連するソースコード（COBOL, PL/1, アセンブラ, Java, C/C++, VB/VBA, PHP, Rust, Python, .NET, C#）のリスト
-   **出力**:
    -   なし（指定情報をアプリケーションサーバーのメモリおよびDBに保存）
-   **処理内容**:
    -   ユーザーが、Webインターフェース上で変換対象オブジェクトに関連するソースコードを指定する。
    -   アプリケーションサーバーが、指定されたソースコードのリストをメモリに保存するとともに、データベース(PostgreSQL)に保存する。

#### 6. マッピングルール設定

-   **入力**:
    -   変換元オブジェクトのリスト
    -   変換先オブジェクトのリスト
    -   デフォルトのマッピングルール
-   **出力**:
    -   カスタマイズされたマッピングルール
-   **処理内容**:
    -   アプリケーションサーバーが、変換元オブジェクトと変換先オブジェクトの対応関係をWebサーバー経由でユーザーに提示する。
    -   アプリケーションサーバーが、デフォルトのマッピングルール（データ型、カラム名、テーブル名などの対応）を提示する。
    -   ユーザーが、Webインターフェース上でマッピングルールを編集（データ型の変更、カラム名の変更、テーブル名の変更、デフォルト値の設定、NULL値の扱いなど）する。
    -   アプリケーションサーバーが、編集されたマッピングルールをメモリに保存し、データベース(PostgreSQL)に保存する。
    -   **AI/RAG/MLサーバーは、変換元DBと変換先DBの特性を学習し、最適なマッピングルールを提案する。**

#### 7. 変換オプション設定

-   **入力**:
    -   変換オプション項目一覧
-   **出力**:
    -   設定された変換オプション
-   **処理内容**:
    -   アプリケーションサーバーが、変換オプション項目一覧（エラー発生時の処理、NULL値の扱い、文字コード変換設定、データフォーマット設定、出力ファイル分割設定など）をWebサーバー経由でユーザーに提示する。
    -   ユーザーが、Webインターフェース上で各オプション項目を設定する。
    -   アプリケーションサーバーが、設定された変換オプションをメモリに保存し、データベース(PostgreSQL)に保存する。

#### 8. 変換シミュレーション

-   **入力**:
    -   プロジェクトID
    -   変換元DB情報
    -   変換先DB情報
    -   対象オブジェクトリスト
    -   関連ソースコードリスト
    -   マッピングルール
    -   変換オプション
-   **出力**:
    -   シミュレーション結果レポート（所要時間予測、変換後ファイル予測、問題点リスト、実行ログ）
-   **処理内容**:
    -   アプリケーションサーバーが、入力情報に基づき、変換処理のシミュレーションを実行する。
    -   アプリケーションサーバーが、変換時間、変換後のファイルサイズ、発生する可能性のあるエラーなどを予測する。
    -   アプリケーションサーバーが、AI/RAG/MLサーバーと連携し、変換後のコードやデータの品質を評価する。
    -   アプリケーションサーバーが、シミュレーション結果をレポートとしてまとめ、Webサーバー経由でユーザーに表示する。
    -   **AI/RAG/MLサーバーは、変換先DBの特性を考慮して、最適な変換オプションを提案する。**

#### 9. 変換実行

-   **入力**:
    -   プロジェクトID
    -   変換元DB情報
    -   変換先DB情報
    -   対象オブジェクトリスト
    -   関連ソースコードリスト
    -   マッピングルール
    -   変換オプション
    -   シミュレーション結果
    -   ユーザーからの変換実行指示
-   **出力**:
    -   変換先DBのスキーマ定義ファイル（SQL DDLなど）
    -   変換先DBにインポート可能なデータファイル（CSV, JSONなど）
    -   変換済みソースコード
    -   変換ログ
-   **処理内容**:
    -   アプリケーションサーバーが、入力情報に基づき、実際の変換処理を実行する。
    -   アプリケーションサーバーが、変換ルールに従い、スキーマ定義を変換し、ファイルに出力する。
    -   アプリケーションサーバーが、変換ルールに従い、データを変換し、ファイルに出力する。
    -   アプリケーションサーバーが、関連ソースコードを解析し、DBアクセス部分を変換先DBに対応したコードに変換する。
    -   アプリケーションサーバーが、変換処理の進捗状況をリアルタイムに監視し、Webサーバー経由でユーザーに表示する。
    -   アプリケーションサーバーが、変換処理中に発生したエラーを検知し、適切に処理（ログ記録、ユーザー通知、リトライなど）する。
    -   アプリケーションサーバーが、変換処理の詳細なログを記録する。
    -   アプリケーションサーバーが、AI/RAG/MLサーバーと連携し、変換処理を最適化する。例えば、AI/RAG/MLサーバーは、変換ルールの適用順序を最適化したり、変換後のコードの品質を向上させたりする。
    -   **アプリケーションサーバーは、変換結果を特定のディレクトリに保存するとともに、変換結果のメタデータ（ファイルパス、ファイルサイズ、生成日時など）をデータベース(PostgreSQL)に保存する。**

#### 10. 変換進捗のダッシュボード表示

-   **入力**:
    -   プロジェクトID
    -   変換進捗情報
-   **出力**:
    -   変換進捗状況のダッシュボード表示
-   **処理内容**:
    -   アプリケーションサーバーが、プロジェクトIDに関連付けられた変換処理の進捗状況（DB変換ステータス、変換シミュレーション、スキーマ定義変換、データ変換、ソースコード変換、変換完了など）をPostgreSQLから取得する。
    -   Webサーバーが、進捗情報を対象オブジェクト毎および関連ソースコード毎に、わかりやすくダッシュボードに表示する。
    -   Webサーバーは、必要に応じて、進捗情報をリアルタイムに更新する。

#### 11. AI/RAG/MLによる変換支援

-   **入力**:
    -   変換元DBのスキーマ情報、データサンプル
    -   変換先DBの情報
    -   関連ソースコード
    -   マッピングルール
-   **出力**:
    -   変換支援情報（最適なスキーマ設計提案、データマッピング提案、コード生成支援、リファクタリング提案、最適化提案など）
-   **処理内容**:
    -   アプリケーションサーバーが、AI/RAG/MLサーバーに、変換元DBのスキーマ情報、データサンプル、変換先DBの情報、関連ソースコード、マッピングルールを送信する。
    -   AI/RAG/MLサーバーが、受け取った情報に基づき、変換支援処理（最適なスキーマ設計提案、データマッピング提案、コード生成支援、リファクタリング提案、最適化提案など）を実行する。
    -   AI/RAG/MLサーバーが、必要に応じて、RAGモデルを用いて外部知識ベースを検索し、変換支援処理に活用する。
    -   AI/RAG/MLサーバーが、変換支援情報をアプリケーションサーバーに返す。

#### 12. 変換結果のデータベース保存

-   **入力**:
    -   プロジェクトID
    -   変換結果（スキーマ定義ファイル、データファイル、変換ログなど）
-   **出力**:
    -   なし（データベースに保存）
-   **処理内容**:
    -   アプリケーションサーバーが、プロジェクトIDと関連付けて、変換結果をPostgreSQL、MongoDBに保存する。
    -   アプリケーションサーバーが、変換ログをMongoDBに保存する。
    -   アプリケーションサーバーが、生成されたスキーマ定義ファイル、データファイルを、指定されたフォーマットでファイルとして保存し、そのパスをPostgreSQLに記録する。

#### 13. 変換結果のレビュー

-   **入力**:
    -   プロジェクトID
    -   変換結果
-   **出力**:
    -   なし
-   **処理内容**:
    -   Webサーバーが、プロジェクトIDに関連付けて、アプリケーションサーバー経由で変換結果（スキーマ定義ファイル、データファイル、ログなど）を取得する。
    -   Webサーバーが、スキーマ定義ファイルやデータファイルを、適切なビューアで表示する。
    -   Webサーバーが、変換ログ（エラー、警告など）を表示する。
    -   ユーザーが、変換結果を確認し、必要に応じて修正やコメントを入力する。
    -   アプリケーションサーバーが、ユーザーからのフィードバックをデータベースに保存する。

#### 14. 変換結果の手動修正

-   **入力**:
    -   プロジェクトID
    -   変換結果（スキーマ定義ファイル、データファイル）
    -   ユーザーによる修正内容
-   **出力**:
    -   修正されたスキーマ定義ファイル、データファイル
-   **処理内容**:
    -   Webサーバーが、プロジェクトIDに関連付けて、アプリケーションサーバー経由で変換結果（スキーマ定義ファイル、データファイル）をユーザーに提供する。
    -   Webサーバーは、ユーザーが変換結果を直接編集できるエディタを提供する。
    -   ユーザーが、エディタを用いて変換結果を修正する。
    -   アプリケーションサーバーが、修正された変換結果をデータベースに保存する。

#### 15. 変換履歴管理

-   **入力**:
    -   プロジェクトID
    -   変換日時、変換種別（ソース変換、DB変換など）、変換対象ソース・DB、変換パラメータ、ユーザーなどの情報
-   **出力**:
    -変換履歴一覧
    -   変換履歴詳細
-   **処理内容**:
    -   アプリケーションサーバーが、変換の実行情報をプロジェクトIDと関連付けてPostgreSQLに記録する。
    -   Webサーバーが、ユーザーからの要求に応じて、変換履歴一覧や詳細情報を表示する。

#### 16. エラーハンドリング

-   **入力**:
    -   エラー情報（エラーメッセージ、エラーコード、発生箇所など）
-   **出力**:
    -   エラーメッセージ（ユーザー向け）
    -   エラーログ
-   **処理内容**:
    -   アプリケーションサーバーが、変換処理中に発生したエラーを検知する。
    -   アプリケーションサーバーが、エラー情報をログに記録する。
    -   アプリケーションサーバーが、エラーの原因を特定し、可能な場合は自動的に対処する。
    -   アプリケーションサーバーが、エラーメッセージを生成し、Webサーバー経由でユーザーに通知する。
    -   アプリケーションサーバーが、エラー発生時の状況を、プロジェクトのステータスとしてデータベース(PostgreSQL)に記録する。

#### 17. 各種マスタとの連携

-   **入力**:
    -   なし
-   **出力**:
    -   なし
-   **処理内容**:
    -   アプリケーションサーバーが、変換処理の実行に必要な情報を、各種マスタから取得する。
    -   アプリケーションサーバーが、環境マスタから、AI/RAG/MLサーバーの接続情報などの設定情報を取得する。
    -   アプリケーションサーバーが、変換ルールマスタから変換ルールを取得する。
    -   アプリケーションサーバーが、テンプレートマスタから、ドキュメント出力のテンプレート情報を取得する。
    -   アプリケーションサーバーが、ダイアレクト基本マスタ、プロダクトマスタ、機能詳細マスタから、変換元DBの方言情報を取得する。

#### 18. CI/CDパイプライン連携

-   **入力**:
    -   プロジェクトID
    -   変換前ソースコード
    -   変換後ソースコード
    -   スキーマ定義情報
    -   データファイル
    -   プログラム仕様書
    -   テスト結果
    -   コンテナプラットフォーム情報（接続先、リポジトリ、認証情報など）
-   **出力**:
    -   なし（指定されたコンテナプラットフォームに成果物をプッシュ）
-   **処理内容**:
    -   アプリケーションサーバーが、ユーザーの指示に基づき、プロジェクトIDに関連付けられた変換前ソースコード、変換後ソースコード、スキーマ定義情報、データファイル、プログラム仕様書、テスト結果を取得する。
    -   アプリケーションサーバーが、指定されたコンテナプラットフォーム（例：GitHub, GitLab, AWS, Azure DevOps）に接続する。
    -   アプリケーションサーバーが、取得した成果物を、指定されたリポジトリやブランチにプッシュする。
    -   アプリケーションサーバーは、プッシュの結果（成功、失敗）をログに記録し、Webサーバー経由でユーザーに通知する。

#### 19. 変換結果のテスト

-   **入力**:
    -   プロジェクトID
    -   変換先DB情報
    -   変換されたスキーマ定義ファイル
    -   変換されたデータファイル
    -   テストデータ
-   **出力**:
    -   テスト結果
-   **処理内容**:
    -   アプリケーションサーバーが、プロジェクトIDに関連付けられた変換先DB情報、変換されたスキーマ定義ファイル、変換されたデータファイル、テストデータを、テスティングフレームワークに渡す。
    -   テスティングフレームワークが、変換先DBにスキーマを適用し、データをインポートする。
    -   テスティングフレームワークが、テストデータを用いて、変換先DBに対するクエリや操作を実行し、期待される結果が得られるか検証する。
    -   アプリケーションサーバーが、テスト結果を取得し、データベース(PostgreSQL)に保存する。
    -   アプリケーションサーバーは、AI/RAG/MLサーバーと連携し、テスト結果の分析や問題の特定を支援する。

#### 20. ドキュメント出力

-   **入力**:
    -   プロジェクトID
    -   解析結果
    -   変換結果
    -   テスト結果
    -   テンプレートマスタ
    -   出力フォーマット（PDF, JSON, XML, CSVなど）
-   **出力**:
    -   指定されたフォーマットのドキュメント
-   **処理内容**:
    -   アプリケーションサーバーが、プロジェクトIDに関連付けられた解析結果、変換結果、テスト結果、テンプレートマスタの設定を取得する。
    -   アプリケーションサーバーが、テンプレートマスタに定義されたフォーマットに従い、指定された形式（PDF, JSON, XML, CSVなど）でドキュメントを生成する。
    -   アプリケーションサーバーが、生成したドキュメントを出力する。
    -   Webサーバーが、出力されたドキュメントをユーザーに提供する。

## DB変換 画面仕様概略

### 1. DB変換メインメニュー画面

-   **画面要素**:
    -   **タイトル**: 「DB変換」
    -   **メニュー項目**:
        -   「新規プロジェクト作成」ボタン
        -   「プロジェクト一覧」テーブル（プロジェクト名、変換元DB、変換先DB、関連ソース、作成日時、ステータスなどを表示）
        -   「プロジェクト選択**: ドロップダウンリスト（操作対象プロジェクトを選択）
        -   「プロジェクト設定」ボタン
        -   「変換結果確認」ボタン
        -   「変換履歴参照」ボタン
        -   「ヘルプ」リンク
-   **画面遷移**:
    -   **新規プロジェクト作成** ボタンクリックで、新規プロジェクト作成画面に遷移する。
    -   **プロジェクト設定** ボタンクリックで、選択したプロジェクトの設定画面に遷移する。
    -   **変換結果確認** ボタンクリックで、選択したプロジェクトの変換結果確認画面に遷移する。
    -   **変換履歴参照** ボタンクリックで、変換履歴画面に遷移する。

### 2. 新規プロジェクト作成画面

-   **画面要素**:
    -   **タイトル**: 「新規プロジェクト作成」
    -   **プロジェクト名**: テキストボックス
    -   **説明**: テキストエリア
    -   **顧客**: ドロップダウンリスト（顧客一覧から選択）
    -   **変換元DB情報**:
        -   **データベース種類**: ドロップダウンリスト（VSAM, DB2, IMS DB, HiRDB, XDM, Symfoware Server, AIM, RIQS, RDMS, ODBC/JDBC接続DBから選択）
        -   **バージョン**: テキストボックス
        -   **接続情報**:
            -   **ホスト名**: テキストボックス
            -   **ポート番号**: テキストボックス
            -   **ユーザー名**: テキストボックス
            -   **パスワード**: パスワードボックス
            -   **データベース名**: テキストボックス（DB2, IMS DB以外）
            -   **データセット名**: テキストボックス（VSAMの場合）
            -   **PSB名**: テキストボックス（IMS DBの場合）
            -   **データソース名**: テキストボックス（ODBC/JDBCの場合）
        -   **関連JCL**: ファイルアップロード
        -   **文字コード**: ドロップダウンリスト
    -   **変換先DB情報**:
        -   **データベース種類**: ドロップダウンリスト（Oracle, MySQL, PostgreSQL, MSSQL, DB2, MongoDBから選択）
        -   **バージョン**: テキストボックス
        -   **接続情報**:
            -   **ホスト名**: テキストボックス
            -   **ポート番号**: テキストボックス
            -   **ユーザー名**: テキストボックス
            -   **パスワード**: パスワードボックス
            -   **データベース名**: テキストボックス
    -   **関連ソースコード**:
        -   **解析プロジェクト選択**: ドロップダウンリスト（解析済みプロジェクトを選択）
        -   **ソースコード選択**: テキストボックス（解析プロジェクト内のソースコードを直接指定）
    -   **作成** ボタン
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **作成** ボタンクリックで、プロジェクトを作成し、DB変換メインメニュー画面に遷移する。
    -   **キャンセル** ボタンクリックで、DB変換メインメニュー画面に遷移する。
-   **補足**:
    -   顧客は、ログインユーザーの情報から自動的に設定されるか、システム管理者が選択する。
    -   **解析プロジェクトの選択によって、変換可能なソースコードがフィルタリングされる。**

### 3. プロジェクト設定画面

-   **画面要素**:
    -   **タイトル**: 「プロジェクト設定」
    -   **プロジェクト名**: テキストボックス（編集可能）
    -   **説明**: テキストエリア（編集可能）
    -   **顧客名**: テキスト表示（読み取り専用）
    -   **変換元DB情報**:
        -   **データベース種類**: ドロップダウンリスト（VSAM, DB2, IMS DB, HiRDB, XDM, Symfoware Server, AIM, RIQS, RDMS, ODBC/JDBC接続DBから選択）
        -   **バージョン**: テキストボックス
        -   **接続情報**:
            -   **ホスト名**: テキストボックス
            -   **ポート番号**: テキストボックス
            -   **ユーザー名**: テキストボックス
            -   **パスワード**: パスワードボックス
            -   **データベース名**: テキストボックス（DB2, IMS DB以外）
            -   **データセット名**: テキストボックス（VSAMの場合）
            -   **PSB名**: テキストボックス（IMS DBの場合）
            -   **データソース名**: テキストボックス（ODBC/JDBCの場合）
        -   **関連JCL**: ファイルアップロード
        -   **文字コード**: ドロップダウンリスト
        -   **接続テスト** ボタン
    -   **変換先DB情報**:
        -   **データベース種類**: ドロップダウンリスト（Oracle, MySQL, PostgreSQL, MSSQL, DB2, MongoDBから選択）
        -   **バージョン**: テキストボックス
        -   **接続情報**:
            -   **ホスト名**: テキストボックス
            -   **ポート番号**: テキストボックス
            -   **ユーザー名**: テキストボックス
            -   **パスワード**: パスワードボックス
            -   **データベース名**: テキストボックス
        -   **接続テスト** ボタン
    -   **対象オブジェクト**:
        -   **オブジェクト一覧**: ツリービュー（データベース、テーブル、カラム、VSAMファイル、IMS DBセグメントなどを階層的に表示）
        -   **選択チェックボックス**: 各オブジェクトに対応するチェックボックス
        -   **検索バー**: テキストボックス（オブジェクト名で検索）
        -   **フィルタリング**: ドロップダウンリスト（オブジェクトの種類でフィルタリング）
        -   **全選択** ボタン
        -   **全解除** ボタン
    -   **関連ソースコード**:
        -   **解析プロジェクト選択**: ドロップダウンリスト（解析済みプロジェクトを選択）
        -   **ソースコード選択**: テキストボックス（解析プロジェクト内のソースコードを直接指定）
    -   **マッピングルール設定**: ボタン（マッピングルール設定画面へ遷移）
    -   **変換オプション設定**: ボタン（変換オプション設定画面へ遷移）
    -   **変換シミュレーション**: ボタン（変換シミュレーション画面へ遷移）
    -   **変換実行**: ボタン（変換実行画面へ遷移）
    -   **保存** ボタン
    -   **削除** ボタン
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **マッピングルール設定** ボタンクリックで、マッピングルール設定画面に遷移する。
    -   **変換オプション設定** ボタンクリックで、変換オプション設定画面に遷移する。
    -   **変換シミュレーション** ボタンクリックで、変換シミュレーション実行画面に遷移する。
    -   **変換実行** ボタンクリックで、変換実行画面に遷移する。
    -   **保存** ボタンクリックで、プロジェクト設定を更新し、DB変換メインメニュー画面に遷移する。
    -   **削除** ボタンクリックで、プロジェクトを削除し、DB変換メインメニュー画面に遷移する。
    -   **キャンセル** ボタンクリックで、DB変換メインメニュー画面に遷移する。
-   **補足**:
    -   プロジェクト名、説明は、プロジェクト作成後に変更可能とする。
    -   顧客名は、プロジェクト作成時に設定され、変更不可とする。
    -   **解析プロジェクトの選択によって、選択可能なソースコードがフィルタリングされる。**

### 4. マッピングルール設定画面

-   **画面要素**:
    -   **タイトル**: 「マッピングルール設定」
    -   **オブジェクト選択**: ドロップダウンリスト（変換対象のオブジェクトを選択）
    -   **変換元情報**: テーブル（変換元オブジェクトのカラム、データ型などを表示）
    -   **変換先情報**: テーブル（変換先オブジェクトのカラム、データ型などを表示）
    -   **マッピング設定**:
        -   **データ型**: ドロップダウンリスト（変換先データ型を選択）
        -   **カラム名**: テキストボックス（変換先カラム名を入力）
        -   **変換関数**: テキストボックス（データ変換に使用する関数を指定）
        -   **デフォルト値**: テキストボックス（デフォルト値を設定）
        -   **NULL値扱い**: ラジオボタン（NULLを許可/不許可）
    -   **追加** ボタン
    -   **削除** ボタン
    -   **保存** ボタン
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **保存** ボタンクリックで、設定内容を保存し、プロジェクト設定画面に遷移する。
    -   **キャンセル** ボタンクリックで、プロジェクト設定画面に遷移する。

### 5. 変換オプション設定画面

-   **画面要素**:
    -   **タイトル**: 「変換オプション設定」
    -   **エラー処理**:
        -   **エラー発生時の動作**: ラジオボタン（処理を続行、処理を中断）
        -   **エラーログ出力**: チェックボックス
    -   **NULL値の扱い**:
        -   **置換**: テキストボックス（NULLを特定の値に置換する場合、値を入力）
        -   **そのまま出力**: チェックボックス
    -   **文字コード**:
        -   **変換元文字コード**: ドロップダウンリスト
        -   **変換先文字コード**: ドロップダウンリスト
    -   **データフォーマット**:
        -   **出力形式**: ドロップダウンリスト（CSV, JSON, SQLから選択）
    -   **ファイル分割**:
        -   **分割サイズ**: テキストボックス（ファイルサイズで分割する場合、サイズを入力）
        -   **分割レコード数**: テキストボックス（レコード数で分割する場合、数を入力）
    -   **変換先DB固有オプション**:
        -   **Oracle**: テキストエリア（SQL*Loaderの制御ファイルを指定）
        -   **その他DB**: 各DBに応じたオプション設定項目
    -   **保存** ボタン
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **保存** ボタンクリックで、設定内容を保存し、プロジェクト設定画面に遷移する。
    -   **キャンセル** ボタンクリックで、プロジェクト設定画面に遷移する。

### 6. 変換シミュレーション実行画面

-   **画面要素**:
    -   **タイトル**: 「変換シミュレーション実行」
    -   **実行** ボタン
    -   **進捗状況**: プログレスバー
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **実行** ボタンクリックで、シミュレーションを開始し、完了後、変換シミュレーション結果確認画面に遷移する。
    -   **キャンセル** ボタンクリックで、プロジェクト設定画面に遷移する。

### 7. 変換シミュレーション結果確認画面

-   **画面要素**:
    -   **タイトル**: 「変換シミュレーション結果」
    -   **サマリ情報**:
        -   **変換開始日時**: テキスト表示
        -   **変換終了日時**: テキスト表示
        -   **所要時間予測**: テキスト表示
        -   **変換後ファイルサイズ予測**: テキスト表示
    -   **変換結果**:
        -   **変換前スキーマ**: ツリービュー（変換前のスキーマ構造を表示）
        -   **変換後スキーマ**: ツリービュー（変換後のスキーマ構造を表示）
        -   **データ比較**: テーブル（変換前後のデータサンプルを比較表示）
    -   **問題点一覧**: テーブル（検出された問題点を一覧表示）
    -   **実行ログ**: テキストエリア（詳細な実行ログを表示）
    -   **操作ボタン**:
        -   **パラメータを修正して再シミュレーション** ボタン
        -   **変換実行** ボタン
        -   **閉じる** ボタン
-   **画面遷移**:
    -   **パラメータを修正して再シミュレーション** ボタンクリックで、変換パラメータ設定画面に遷移する。
    -   **変換実行** ボタンクリックで、変換処理を実行し、変換結果確認画面に遷移する。
    -   **閉じる** ボタンクリックで、プロジェクト設定画面に遷移する。

### 8. 変換実行画面

-   **画面要素**:
    -   **タイトル**: 「変換実行」
    -   **実行** ボタン
    -   **進捗状況**: プログレスバー
    -   **キャンセル** ボタン
-   **画面遷移**:
    -   **実行** ボタンクリックで、変換処理を開始し、完了後、変換結果確認画面に遷移する。
    -   **キャンセル** ボタンクリックで、プロジェクト設定画面に遷移する。

### 9. 変換結果確認画面

-   **画面要素**:
    -   **タイトル**: 「変換結果」
    -   **サマリ情報**:
        -   **変換開始日時**: テキスト表示
        -   **変換終了日時**: テキスト表示
        -   **所要時間**: テキスト表示
        -   **変換結果**: テキスト表示（成功、失敗）
        -   **成功件数**: テキスト表示
        -   **失敗件数**: テキスト表示
    -   **生成ファイル一覧**: テーブル（生成されたファイル名、ダウンロードリンクを表示）
    -   **エラーログ: テキストエリア（エラーが発生した場合、エラーログを表示）
    -   **詳細レポート**: ダウンロードリンク
    -   **OK** ボタン
-   **画面遷移**:
    -   **OK** ボタンクリックで、DB変換メインメニュー画面に遷移する。

### 10. 変換履歴参照画面

-   **画面要素**:
    -   **タイトル**: 「変換履歴参照」
    -   **検索条件**:
        -   **変換日時**: テキストボックス（範囲指定）
        -   **実行ユーザー**: テキストボックス
        -   **プロジェクト**: テキストボックス
        -   **変換元DB**: ドロップダウンリスト
        -   **変換先DB**: ドロップダウンリスト
        -   **対象オブジェクト**: テキストボックス
        -   **変換結果**: ラジオボタン（成功、失敗、全て）
        -   **検索** ボタン
    -   **変換履歴一覧**: テーブル（検索結果を表示）
    -   **詳細** ボタン（選択した履歴の詳細画面に遷移）
    -   **閉じる** ボタン
-   **画面遷移**:
    -   **詳細** ボタンクリックで、選択した履歴の詳細画面に遷移する。
    -   **閉じる** ボタンクリックで、DB変換メインメニュー画面に遷移する。

### 11. 変換履歴詳細画面

-   **画面要素**:
    -   **タイトル**: 「変換履歴詳細」
    -   **変換情報**:
        -   **変換日時**: テキスト表示
        -   **実行ユーザー**: テキスト表示
        -   **プロジェクト**: テキスト表示
        -   **変換元DB**: テキスト表示
        -   **変換先DB**: テキスト表示
        -   **対象オブジェクト**: テキスト表示
        -   **変換オプション**: テキスト表示
        -   **変換結果**: テキスト表示（成功、失敗）
        -   **メッセージ**: テキスト表示
    -   **生成ファイル一覧**: テーブル（生成されたファイル名、ダウンロードリンクを表示）
    -   **エラーログ**: テキストエリア（エラーが発生した場合、エラーログを表示）
    -   **詳細レポート**: ダウンロードリンク
    -   **戻る** ボタン
-   **画面遷移**:
    -   **戻る** ボタンクリックで、変換履歴参照画面に遷移する。
